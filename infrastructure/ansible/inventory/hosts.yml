# Enhanced Ansible Inventory for RiskOptimizer Infrastructure
# This inventory defines host groups with security and compliance considerations

# Production Environment
[production:children]
vault_servers
databases
webservers
app_servers
monitoring
security
load_balancers

# Staging Environment
[staging:children]
staging_vault
staging_databases
staging_webservers
staging_app_servers
staging_monitoring

# Development Environment
[development:children]
dev_all_in_one

# Security Infrastructure
[vault_servers]
vault-1.riskoptimizer.com ansible_host=10.0.1.10 vault_node_role=leader
vault-2.riskoptimizer.com ansible_host=10.0.1.11 vault_node_role=follower
vault-3.riskoptimizer.com ansible_host=10.0.1.12 vault_node_role=follower

[databases]
db-primary.riskoptimizer.com ansible_host=10.0.2.10 database_role=primary database_type=postgresql
db-replica-1.riskoptimizer.com ansible_host=10.0.2.11 database_role=replica database_type=postgresql
db-replica-2.riskoptimizer.com ansible_host=10.0.2.12 database_role=replica database_type=postgresql

[redis_cluster]
redis-1.riskoptimizer.com ansible_host=10.0.2.20 redis_role=master
redis-2.riskoptimizer.com ansible_host=10.0.2.21 redis_role=slave
redis-3.riskoptimizer.com ansible_host=10.0.2.22 redis_role=slave

# Web Tier
[load_balancers]
lb-1.riskoptimizer.com ansible_host=10.0.3.10 lb_role=primary
lb-2.riskoptimizer.com ansible_host=10.0.3.11 lb_role=secondary

[webservers]
web-1.riskoptimizer.com ansible_host=10.0.3.20 web_role=frontend
web-2.riskoptimizer.com ansible_host=10.0.3.21 web_role=frontend
web-3.riskoptimizer.com ansible_host=10.0.3.22 web_role=frontend

# Application Tier
[app_servers]
app-1.riskoptimizer.com ansible_host=10.0.4.10 app_role=api
app-2.riskoptimizer.com ansible_host=10.0.4.11 app_role=api
app-3.riskoptimizer.com ansible_host=10.0.4.12 app_role=worker
app-4.riskoptimizer.com ansible_host=10.0.4.13 app_role=worker

# Monitoring Infrastructure
[monitoring]
prometheus.riskoptimizer.com ansible_host=10.0.5.10 monitoring_role=metrics
grafana.riskoptimizer.com ansible_host=10.0.5.11 monitoring_role=visualization
elasticsearch-1.riskoptimizer.com ansible_host=10.0.5.20 es_role=master es_node_data=true
elasticsearch-2.riskoptimizer.com ansible_host=10.0.5.21 es_role=master es_node_data=true
elasticsearch-3.riskoptimizer.com ansible_host=10.0.5.22 es_role=master es_node_data=true
logstash.riskoptimizer.com ansible_host=10.0.5.30 logging_role=processing
kibana.riskoptimizer.com ansible_host=10.0.5.31 logging_role=visualization

# Security Infrastructure
[security]
ids-1.riskoptimizer.com ansible_host=10.0.6.10 security_role=intrusion_detection
ids-2.riskoptimizer.com ansible_host=10.0.6.11 security_role=intrusion_detection
vuln-scanner.riskoptimizer.com ansible_host=10.0.6.20 security_role=vulnerability_scanning
siem.riskoptimizer.com ansible_host=10.0.6.30 security_role=siem

# Staging Environment
[staging_vault]
staging-vault.riskoptimizer.com ansible_host=10.1.1.10

[staging_databases]
staging-db.riskoptimizer.com ansible_host=10.1.2.10 database_role=primary database_type=postgresql

[staging_webservers]
staging-web.riskoptimizer.com ansible_host=10.1.3.10

[staging_app_servers]
staging-app.riskoptimizer.com ansible_host=10.1.4.10

[staging_monitoring]
staging-monitoring.riskoptimizer.com ansible_host=10.1.5.10

# Development Environment
[dev_all_in_one]
dev.riskoptimizer.com ansible_host=10.2.1.10

# Kubernetes Nodes
[kubernetes_masters]
k8s-master-1.riskoptimizer.com ansible_host=10.0.7.10 k8s_role=master
k8s-master-2.riskoptimizer.com ansible_host=10.0.7.11 k8s_role=master
k8s-master-3.riskoptimizer.com ansible_host=10.0.7.12 k8s_role=master

[kubernetes_workers]
k8s-worker-1.riskoptimizer.com ansible_host=10.0.7.20 k8s_role=worker
k8s-worker-2.riskoptimizer.com ansible_host=10.0.7.21 k8s_role=worker
k8s-worker-3.riskoptimizer.com ansible_host=10.0.7.22 k8s_role=worker
k8s-worker-4.riskoptimizer.com ansible_host=10.0.7.23 k8s_role=worker

[kubernetes:children]
kubernetes_masters
kubernetes_workers

# Group Variables
[all:vars]
# SSH Configuration
ansible_user=ansible
ansible_ssh_private_key_file=~/.ssh/riskoptimizer_key
ansible_ssh_common_args='-o StrictHostKeyChecking=yes -o UserKnownHostsFile=/dev/null -o ControlMaster=auto -o ControlPersist=60s'
ansible_python_interpreter=/usr/bin/python3

# Environment Configuration
environment=production
deployment_timestamp="{{ ansible_date_time.epoch }}"
deployment_version="1.0.0"

# Security Configuration
security_baseline_enabled=true
compliance_mode=strict
audit_logging_enabled=true
encryption_required=true
firewall_enabled=true
fail2ban_enabled=true

# Monitoring Configuration
centralized_logging_enabled=true
metrics_collection_enabled=true
distributed_tracing_enabled=true
alerting_enabled=true

# Backup Configuration
backup_enabled=true
backup_retention_days=90
backup_encryption_enabled=true

# Network Configuration
internal_network="10.0.0.0/8"
management_network="10.0.0.0/16"
dmz_network="10.0.3.0/24"

# DNS Configuration
dns_domain=riskoptimizer.com
dns_servers=['10.0.0.10', '10.0.0.11']

# NTP Configuration
ntp_servers=['pool.ntp.org', 'time.google.com']

# Certificate Configuration
ssl_certificate_authority=riskoptimizer-ca
ssl_certificate_validity_days=365
ssl_key_size=4096

[production:vars]
# Production-specific variables
environment=production
compliance_mode=strict
backup_retention_days=2555  # 7 years for financial compliance
log_retention_days=2555
security_scan_frequency=daily
vulnerability_scan_frequency=weekly
penetration_test_frequency=quarterly

# Database Configuration
database_backup_frequency=hourly
database_backup_retention=90
database_encryption_enabled=true
database_audit_logging=true

# Application Configuration
application_log_level=INFO
application_debug_mode=false
application_profiling_enabled=false

# Security Configuration
security_hardening_level=high
intrusion_detection_enabled=true
vulnerability_scanning_enabled=true
security_monitoring_enabled=true

[staging:vars]
# Staging-specific variables
environment=staging
compliance_mode=standard
backup_retention_days=30
log_retention_days=30
security_scan_frequency=weekly

# Database Configuration
database_backup_frequency=daily
database_backup_retention=7
database_encryption_enabled=true
database_audit_logging=true

# Application Configuration
application_log_level=DEBUG
application_debug_mode=true
application_profiling_enabled=true

[development:vars]
# Development-specific variables
environment=development
compliance_mode=basic
backup_retention_days=7
log_retention_days=7
security_scan_frequency=monthly

# Database Configuration
database_backup_frequency=daily
database_backup_retention=3
database_encryption_enabled=false
database_audit_logging=false

# Application Configuration
application_log_level=DEBUG
application_debug_mode=true
application_profiling_enabled=true

# Security Configuration (relaxed for development)
security_hardening_level=medium
intrusion_detection_enabled=false
vulnerability_scanning_enabled=false
security_monitoring_enabled=false

[vault_servers:vars]
# Vault-specific configuration
vault_datacenter=riskoptimizer-dc1
vault_encrypt_token=true
vault_ui_enabled=true
vault_api_addr="https://{{ ansible_default_ipv4.address }}:8200"
vault_cluster_addr="https://{{ ansible_default_ipv4.address }}:8201"
vault_storage_backend=consul
vault_seal_type=awskms
vault_log_level=INFO
vault_max_lease_ttl=768h
vault_default_lease_ttl=168h

[databases:vars]
# Database-specific configuration
database_name=riskoptimizer
database_admin_user=postgres
database_port=5432
database_max_connections=200
database_shared_buffers=256MB
database_effective_cache_size=1GB
database_maintenance_work_mem=64MB
database_checkpoint_completion_target=0.9
database_wal_buffers=16MB
database_default_statistics_target=100

[webservers:vars]
# Web server configuration
web_server_type=nginx
web_server_port=80
web_server_ssl_port=443
web_server_worker_processes=auto
web_server_worker_connections=1024
web_server_keepalive_timeout=65
web_server_client_max_body_size=10M
web_server_gzip_enabled=true
web_server_ssl_protocols="TLSv1.2 TLSv1.3"
web_server_ssl_ciphers="ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384"

[app_servers:vars]
# Application server configuration
app_runtime=java
app_java_version=11
app_heap_size=2g
app_gc_algorithm=G1GC
app_jvm_options="-XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap"
app_port=8080
app_management_port=8081
app_thread_pool_size=200
app_connection_timeout=30000
app_read_timeout=60000

[monitoring:vars]
# Monitoring configuration
prometheus_retention_time=15d
prometheus_storage_retention_size=50GB
grafana_admin_user=admin
grafana_database_type=postgres
grafana_session_provider=redis
elasticsearch_cluster_name=riskoptimizer-logs
elasticsearch_heap_size=2g
logstash_heap_size=1g
kibana_elasticsearch_request_timeout=30000

[security:vars]
# Security infrastructure configuration
ids_type=ossec
ids_log_level=INFO
ids_email_notification=true
ids_active_response=true
vulnerability_scanner_type=nessus
vulnerability_scan_schedule="0 2 * * 0"  # Weekly on Sunday at 2 AM
siem_retention_days=365
siem_correlation_enabled=true
